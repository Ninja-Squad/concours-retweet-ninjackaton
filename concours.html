<html>
<head>
</head>
<body>

<h1>Les participants au concours</h1>
<ul id="contestants">
</ul>

<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script>
var urlRetweets = [
	"https://api.twitter.com/1/statuses/301679956147187713/retweeted_by.json?count=100&callback=?", 
	"https://api.twitter.com/1/statuses/301678974201905154/retweeted_by.json?count=100&callback=?"];

var urlSearchBlog = [
	"http://search.twitter.com/search.json?q=http%3A%2F%2Fblog.ninja-squad.com%2F2013%2F02%2F13%2Fjava-8&rpp=100&result_type=recent&callback=?"
]


$(function() {
	$(urlRetweets).each(function(index, item) {
		$.getJSON(item, function(users) {
			$(users).each(function(index,user) {
				addContestant(user.screen_name);
			});
		});
	});

	$(urlSearchBlog).each(function(index, item) {
		$.getJSON(item, function(results) {
			$(results.results).each(function(index,tweet) {
				addContestant(tweet.from_user);
			});
		});
	});

	var contestants = [];
	function addContestant(username) {
		if (!isNinja(username)) {
			if ($.inArray(username,contestants) < 0) {
				contestants.push(username);
				$("#contestants").append("<li><a href='http://twitter.com/"+username+"'>@"+username+"</a></li>")
			}
		}
	}

	var ninjas=["agnes_crepet", "cedric_exbrayat", "jbnizet", "clacote", "ninjasquad"];
	function isNinja(username) {
		return ($.inArray(username.toLowerCase(), ninjas) >= 0);
	}
})



</script>
</body>
</html>
